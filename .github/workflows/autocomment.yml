name: Auto Comment and Label
on: [issues, pull_request]
jobs:
  run:
    runs-on: ubuntu-latest
    steps:
      - name: Auto Comment
        uses: wow-actions/auto-comment@v1
        with:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          issuesOpened: |
            👋 @{{ author }}
            Thank you for raising an issue. We will will investigate into the matter and get back to you as soon as possible.
            Please make sure you have given us as much context as possible.
            感谢您提出问题。我们将调查此事并尽快回复您。
            请确保您已向我们提供尽可能多的背景信息。

          pullRequestOpened: |
            👋 @{{ author }}
            Thank you for raising your pull request.
            Please make sure you have followed our contributing guidelines. We will review it as soon as possible
            感谢您提出拉取请求。
            请确保您已遵循我们的贡献指南。我们将尽快审核

      - name: Check for NEW_RULE_GROUP and Assign Label
        uses: actions/github-script@v6
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          script: |
            const issueOrPr = context.payload.issue || context.payload.pull_request;
            const body = issueOrPr.body;
            if (body.includes('__NEW_RULE_GROUP')) {
              await github.issues.addLabels({
                owner: context.repo.owner,
                repo: context.repo.repo,
                issue_number: issueOrPr.number,
                labels: ['rule groups']
              });
            }
